# Docker Compose override for 100K HNSW capacity testing.
#
# Usage:
#   docker compose -f docker-compose.yml -f docker-compose.capacity.yml up
#
# At 100K 1536-dim vectors the HNSW index is ~600MB.
# shared_buffers=2GB ensures the index fits in shared memory.
# maintenance_work_mem=1GB allows in-memory HNSW index builds.
services:
  postgres:
    command: >
      postgres
      -c shared_buffers=2GB
      -c effective_cache_size=4GB
      -c maintenance_work_mem=1GB
      -c work_mem=64MB
